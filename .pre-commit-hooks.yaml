# Secret Detection
- id: secrets-gitleaks
  name: Checks commits for secrets w gitleaks
  description: Checks commits for secrets w gitleaks
  entry: zricethezav/gitleaks
  language: docker_image

- id: secrets-yelp
  name: Detect secrets
  description: Detects high entropy strings that are likely to be passwords.
  entry: --entrypoint detect-secrets donaldrich/function:detect-secrets
  # args: ['scan', '--base64-limit', '4.5', '--hex-limit', '3']
  args: ["scan"]
  language: docker_image

- id: lint-markdown-markdownlint
  name: Lint Markdown w markdownlint
  description: Lint Markdown w markdownlint
  language: docker_image
  entry: donaldrich/function:markdown markdownlint
  types: [markdown]
  exclude: .meta/snippets/layout.md

- id: lint-markdown-remarklint
  name: Lint markdown w remark
  description: remark-lint
  language: docker_image
  entry: pipelinecomponents/remark-lint remark
  args: ["."]
  types: [markdown]

- id: lint-yaml-yamllint
  name: Lint YAML w yamllint
  description: Lint YAML w yamllint
  language: docker_image
  entry: --entrypoint yamllint pipelinecomponents/yamllint
  args: ["."]
  types: [yaml]

- id: prettier
  name: prettier
  entry: --entrypoint prettier donaldrich/function:prettier
  language: docker_image
  args: ['--write', '--list-different', '--ignore-unknown']

- id: lint-markdown-misspell
  name: misspell
  entry: --entrypoint misspell donaldrich/function:misspell
  language: docker_image
  args: [-w, "."]
  types: [markdown]

- id: mdspell
  name: mdspell
  description: mdspell
  language: docker_image
  entry: --entrypoint mdspell pipelinecomponents/markdown-spellcheck mdspell
  args: [--report '**/*.md']
  types: [markdown]

- id: ansible-lint
  name: ansible-lint
  description: ansible-lint
  language: docker_image
  entry: pipelinecomponents/ansible-lint ansible-lint
  args: ["*"]
  types: [yaml]

- id: tflint
  name: tflint
  language: docker_image
  verbose: true
  entry: --entrypoint tflint donaldrich/function:terraform # wata727/tflint
  files: \.tf$
  exclude: \.+.terraform\/.*$

- id: lint-shell-shfmt
  name: shfmt
  entry: --entrypoint shfmt donaldrich/function:shell
  language: docker_image
  args: ["-w", "."]
  # types: [markdown]

- id: lint-shell-dockerfile_lint
  name: dockerfile_lint
  entry: --entrypoint dockerfile_lint donaldrich/function:dockerfile_lint
  language: docker_image
  args: [--dockerfile]
  files: Dockerfile.*

- id: terraform-checkov
  name: checkov
  entry: --entrypoint checkov donaldrich/function:checkov
  language: docker_image
  args:
    ["-d", "."]

- id: lint-dockerfile-dockerfilelint
  name: Lint Dockerfiles w dockerfilelint linter
  entry: --entrypoint dockerfilelint donaldrich/function:dockerfilelint
  language: docker_image
  files: Dockerfile.*    

- id: lint-dockerfile-hadolint
  name: Lint Dockerfiles w hadolint
  description: Lint Dockerfiles w hadolint
  language: docker_image
  entry: hadolint/hadolint hadolint
  files: Dockerfile
    # args: ["-style=Google"]
  # -   id: dockerfile-no-entrypoint-1
  #     name: ...
  #     language: docker_image
  #     entry: --entrypoint my-exe my.registry.example.com/docker-image-2:latest
  # # Alternative equivalent solution
  # -   id: dockerfile-no-entrypoint-2
  #     name: ...
  #     language: docker_image
  #     entry: my.registry.example.com/docker-image-3:latest my-exe

  # -v $pwd:"/work"
